認証について

3つの認証方式
	Web
	iOS_APNs
	Android_LVL

認証キーと認証トークン
	認証キー
		購読者のIDと1:1対応
		認証トークンが失われた場合に購読者に入力させる
			Webのみ購読者に知らせる
			他の方式では、購読者のIDと実際の個人の1:1対応にこだわらず、新しいIDを振る
	認証トークン
		クライアントに保存されており、リクエスト時に常に渡す
			セッションクッキーに類似
			Webではクッキーとして渡す
			他の方式ではリクエストヘッダとして渡す
		購読者のIDと1:N対応
			Nは最大3
		発行から一定時間が過ぎるとOutdatedとなる
			Outdatedの時点ではまだ有効だが、このあいだに更新する
			Web：クッキーとして
			iOS_APNs
				レスポンスヘッダでOutdatedであることをクライアントに通知する
				新しいトークンはクライアントが請求し、APNs経由で渡す
					このときデバイストークンを渡す
			Android_LVL
				レスポンスヘッダでOutdatedであることをクライアントに通知する
				新しいトークンはクライアントが請求し、レスポンスで渡す
					このときLVLの署名付きデータを渡す

不正なリクエスト
	24時間以内に4つの認証トークンを請求された場合
		Web：購読者IDを96時間BANする
		iOS_APNsとAndroid_LVL：BANしないが、新しいトークンの発行を拒否する
			エラーの理由をレスポンスヘッダX-flowerflower-ErrorReasonで返す
